(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{37:function(e,n,t){"use strict";t.r(n);var o=t(0),r=t(1),a=t(14),c=t.n(a),s=t(3),u=function(e){var n=e.text,t=e.filter,r=e.handler;return Object(o.jsxs)("div",{children:[n,Object(o.jsx)("input",{value:t,onChange:r})]})},i=function(e){var n=e.person,t=e.DeletePerson;return Object(o.jsxs)("li",{children:[n.name," ",n.number,Object(o.jsx)("button",{onClick:t,children:"delete"})]})},l=function(e){var n=e.addName,t=e.newName,r=e.handleNameChange,a=e.newNumber,c=e.handleNumberChange;return Object(o.jsxs)("form",{onSubmit:n,children:[Object(o.jsxs)("div",{children:["name: ",Object(o.jsx)("input",{value:t,onChange:r})]}),Object(o.jsxs)("div",{children:["number: ",Object(o.jsx)("input",{value:a,onChange:c})]}),Object(o.jsx)("div",{children:Object(o.jsx)("button",{type:"submit",children:"add"})})]})},d=function(e){var n=e.message;console.log("message: ",n);return null===n.message?null:Object(o.jsx)("div",{style:n.style?{color:"green",background:"lightgrey",fontSize:20,borderStyle:"solid",borderRadius:5,padding:10,marginBottom:10}:{color:"red",background:"lightgrey",fontSize:20,borderStyle:"solid",borderRadius:5,padding:10,marginBottom:10},children:n.message})},m=t(4),f=t.n(m),b="api/persons",j=function(){return f.a.get(b).then((function(e){return e.data}))},h=function(e){return f.a.post(b,e).then((function(e){return e.data}))},g=function(e,n){return f.a.put("".concat(b,"/").concat(e),n).then((function(e){return e.data}))},O=function(e){return f.a.delete("".concat(b,"/").concat(e)).then((function(e){return e.data}))},p=function(){var e=Object(r.useState)([]),n=Object(s.a)(e,2),t=n[0],a=n[1],c=Object(r.useState)(""),m=Object(s.a)(c,2),f=m[0],b=m[1],p=Object(r.useState)(""),v=Object(s.a)(p,2),x=v[0],y=v[1],w=Object(r.useState)(""),N=Object(s.a)(w,2),C=N[0],S=N[1],k=Object(r.useState)({message:null,style:!0}),D=Object(s.a)(k,2),T=D[0],B=D[1];Object(r.useEffect)((function(){console.log("effect"),j().then((function(e){a(e)}))}),[]),console.log("render",t.length,"persons");var L=t.filter((function(e){return-1!==e.name.toLowerCase().indexOf(C.toLowerCase())}));return Object(o.jsxs)("div",{children:[Object(o.jsx)("h2",{children:"Phonebook"}),Object(o.jsx)(d,{message:T}),Object(o.jsx)(u,{text:"filter shown with ",filter:C,handler:function(e){console.log(e.target.value),S(e.target.value)}}),Object(o.jsx)("h2",{children:"add a new"}),Object(o.jsx)(l,{addName:function(e){e.preventDefault();var n={name:f,number:x};-1!==t.map((function(e){return e.name})).indexOf(f)?(console.log("Nimi oli jo: ",f),window.confirm("".concat(f," is already added to phonebook, replace the older number with a new one?"))&&(g(t.find((function(e){return e.name===f})).id,n).then((function(e){a(t.map((function(n){return n.name!==f?n:e})))})).catch((function(e){B({message:"Information of ".concat(f," has already been removed from server"),style:!1}),setTimeout((function(){B({message:null,style:!0})}),3e3),a(t.filter((function(e){return e.name!==f})))})),B({message:"Updated ".concat(f),style:!0}),setTimeout((function(){B({message:null,style:!0})}),3e3)),b(""),y("")):(console.log("Lis\xe4t\xe4\xe4n uusi nimi: ",f),h(n).then((function(e){a(t.concat(e))})),console.log("persons: ",t),B({message:"Added ".concat(f),style:!0}),setTimeout((function(){B({message:null,style:!0})}),3e3),b(""),y(""))},newName:f,handleNameChange:function(e){console.log(e.target.value),b(e.target.value)},newNumber:x,handleNumberChange:function(e){console.log(e.target.value),y(e.target.value)}}),Object(o.jsx)("h2",{children:"Numbers"}),Object(o.jsx)("ul",{children:L.map((function(e,n){return Object(o.jsx)(i,{person:e,DeletePerson:function(){return n=e.id,void(window.confirm("Delete ".concat(t.find((function(e){return e.id===n})).name,"?"))&&(O(n).then((function(e){a(t.filter((function(e){return e.id!==n})))})),B({message:"Deleted ".concat(f),style:!0}),setTimeout((function(){B({message:null,style:!0})}),3e3)));var n}},n)}))})]})};c.a.render(Object(o.jsx)(p,{}),document.getElementById("root"))}},[[37,1,2]]]);
//# sourceMappingURL=main.8085711b.chunk.js.map